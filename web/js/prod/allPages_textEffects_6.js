gEASES={easeIn:"power1.in",easeOut:"power1.out",easeInOut:"power1.inOut",back:"back.inOut(1.7)",elastic:"elastic.inOut(1, 0.3)",bounce:"bounce.inOut",rough:"rough({ template: none.out, strength: 1, points: 20, taper: 'none', randomize: true, clamp: false})",slowMo:"slow(0.7, 0.7, false)",stepped:"steps(12)",none:"none"};gEFFECTS={all:{name:"All",fields:[{name:"split",type:"select",default:"no",options:["no","chars","words","lines"]},{name:"order",type:"select",default:"Forwards",options:["Forwards","Backwards","Random","Middle to Ends","Ends to Middle"]},{name:"duration",type:"text",default:1},{name:"interval",type:"text",default:.1},{name:"ease",type:"select",default:"easeIn",options:Object.keys(gEASES)}]},custom:{name:"Custom",init:customTextEffectInit,start:customTextEffectStart,fields:[{name:"x",type:"text",default:0,abilities:["sequence","random"]},{name:"y",type:"text",default:0,abilities:["sequence","random"]},{name:"z",type:"text",default:0,abilities:["sequence","random"]},{name:"scaleX",type:"text",default:1},{name:"scaleY",type:"text",default:""},{name:"opacity",type:"text",default:0},{name:"rotateX",type:"text",default:0,abilities:["sequence","random"]},{name:"rotateY",type:"text",default:0,abilipties:["sequence","random"]},{name:"rotateZ",type:"text",default:0,abilities:["sequence","random"]}]},slideReveal:{name:"Slide Reveal",init:slideRevealTextEffectInit,start:slideRevealTextEffectStart,fields:[{name:"opacity",type:"text",default:0},{name:"direction",type:"select",default:"left",options:["left","right","top","bottom"]},{name:"lineHeight",type:"text",default:""},{name:"edges",type:"select",default:"text",options:["element","text"]}]}};$(document).ready(function(){allTextEffectsInit();textEffectTriggersProcess()});function allTextEffectsInViewCheck(){$("[data-text-effect-data]").each(function(){var textElement=$(this);var data=textEffectDataGetFromElement(textElement);if("inView"==data.trigger){if(elementIsInViewport(textElement)&&!textElement.data("textEffectTriggered")){textElementEffectStart(textElement);textElement.data("textEffectTriggered",true)}}})}function textEffectTriggersProcess(){$("[data-text-effect-data]").each(function(){var textElement=$(this);var data=textEffectDataGetFromElement(textElement);if("load"==data.trigger){textElementEffectStart(textElement)}else if("inView"==data.trigger){textElementInViewEffectTriggerInit(textElement)}else if("rowPause"==data.trigger){textElementRowPauseTriggerInit(textElement)}})}function textElementRowPauseTriggerInit(pTextElement){pTextElement.data("parallaxPauseCallbacksTrigger",function(){textElementEffectStart(pTextElement)})}function textElementInViewEffectTriggerInit(pTextElement){textElementInViewCheck(pTextElement);$(window).scroll(function(){textElementInViewCheck(pTextElement)})}function textElementInViewCheck(pTextElement){if(elementIsInViewport(pTextElement)){console.log("In View")}else{console.log("Out of View")}if(elementIsInViewport(pTextElement)&&!pTextElement.data("textEffectTriggered")){textElementEffectStart(pTextElement);pTextElement.data("textEffectTriggered",true)}}function allTextEffectsInitThenStart(){allTextEffectsInit();allTextEffectsStart()}function elementTextEffectsInitThenStart(pElement){elementTextEffectsInit(pElement);elementTextEffectsStart(pElement)}function elementTextEffectsInit(pElement){pElement.find("[data-text-effect-data]").each(function(){textEffectInit($(this))})}function elementTextEffectsStart(pElement){pElement.find("[data-text-effect-data]").each(function(){textElementEffectStart($(this))})}function textEffectInit(pTextElement,pData){textEffectReset(pTextElement);if(!pData){pData=textEffectDataGetFromElement(pTextElement)}var elements=elementTextEffectSplit(pTextElement,pData);$.each(elements,function(pIndex){if(pData.id in gEFFECTS){gEFFECTS[pData.id].init($(this),pData,pIndex,elements.length)}})}function customTextEffectInitialPropertiesGet(pData,pIndex,pElementCount){var properties={x:textEffectValueCalculate(pData.x,pIndex,pElementCount),y:textEffectValueCalculate(pData.y,pIndex,pElementCount),z:textEffectValueCalculate(pData.z,pIndex,pElementCount),scaleX:textEffectValueCalculate(pData.scaleX,pIndex,pElementCount),scaleY:textEffectValueCalculate(pData.scaleY,pIndex,pElementCount),opacity:textEffectValueCalculate(pData.opacity,pIndex,pElementCount),rotationX:textEffectValueCalculate(pData.rotateX,pIndex,pElementCount),rotationY:textEffectValueCalculate(pData.rotateY,pIndex,pElementCount),rotationZ:textEffectValueCalculate(pData.rotateZ,pIndex,pElementCount)};if(""==pData.scaleY){properties.scaleY=properties.scaleX}return properties}function slideRevealTextEffectInit(pTextElement,pData,pIndex,pElementCount){var text=pTextElement.html();pTextElement.empty();var newTextElement=$('<div class="slideRevealText">').text(text);newTextElement.css("opacity",pData.opacity);if("text"==pData.edges){var justifiedOverflowElement=$("<div>");justifiedOverflowElement.css("display","inline-block");justifiedOverflowElement.css("overflow","hidden");justifiedOverflowElement.append(newTextElement);pTextElement.append(justifiedOverflowElement)}else{pTextElement.append(newTextElement);pTextElement.css("overflow","hidden");pTextElement.append(newTextElement)}if(""!=pData.lineHeight){newTextElement.css("line-height",pData.lineHeight+"px")}var properties={};if("left"==pData.direction){properties["x"]="-100%"}else if("right"==pData.direction){properties["x"]="100%"}else if("top"==pData.direction){properties["y"]="-100%"}else if("bottom"==pData.direction){properties["y"]="100%"}TweenMax.set(newTextElement,properties)}function slideRevealTextEffectStart(pElement,pData,pIgnoreDelay){textEffectStaggerStart(pElement,pElement.find(".slideRevealText").toArray(),pData,slideRevealTextEffectFinalPropertiesGet,pIgnoreDelay)}function slideRevealTextEffectFinalPropertiesGet(pData){return{x:"0%",y:"0%",opacity:1,ease:easeGet(pData)}}function customTextEffectInit(pTextElement,pData,pIndex,pElementCount){TweenMax.set(pTextElement,customTextEffectInitialPropertiesGet(pData,pIndex,pElementCount))}function customTextEffectStart(pElement,pData,pIgnoreDelay){TweenMax.set(pElement,{perspective:500});textEffectStaggerStart(pElement,pElement.data("splitText")[pData.split],pData,customTextEffectFinalPropertiesGet,pIgnoreDelay)}function allTextEffectsInit(){$("[data-text-effect-data]").each(function(){textEffectInit($(this))})}function textEffectDataGetFromElement(pElement){var data=pElement.data("text-effect-data");data=htmlDecode(data);data=$.parseJSON(data);return data}function allTextEffectsStart(){$("[data-text-effect-data]").each(function(){textElementEffectStart($(this))})}function textEffectReset(pTextElement){var previousSplitText=pTextElement.data("splitText");if(previousSplitText){previousSplitText.revert();pTextElement.removeData("splitText")}pTextElement.css("opacity",1)}function elementTextEffectSplit(pElement,pData){if(!pData){pData=textEffectDataGetFromElement(pElement)}if("no"!=pData.split){var splitText=new SplitText(pElement,{type:pData.split});pElement.data("splitText",splitText);return splitText[pData.split]}var newElement=$("<div>").text(pElement.text());newElement.css("display","inline-block");pElement.empty();pElement.append(newElement);var fakeSplitText={no:newElement,revert:function(){var text=newElement.text();pElement.empty();pElement.text(text)}};pElement.data("splitText",fakeSplitText);return[newElement]}function textElementEffectStart(pElement,pData,pIgnoreDelay){if(!pData){pData=textEffectDataGetFromElement(pElement)}if(!(pData.id in gEFFECTS)){return}var effectInfo=gEFFECTS[pData.id];effectInfo.start(pElement,pData,pIgnoreDelay)}function elementsOrder(pData,pElements){if("Backwards"==pData.order){pElements=pElements.reverse()}else if("Random"==pData.order){pElements=arrayShuffle(pElements)}}function textEffectStaggerStart(pParent,pElements,pData,pFinalPropertiesGetter,pIgnoreDelay){if(pIgnoreDelay){pData.delay=0}else{pData.delay=parseFloat(pData.delay)}pData.interval=parseFloat(pData.interval);var interval=parseFloat(pData.interval);if("Backwards"==pData.order){pElements=pElements.reverse()}else if("Random"==pData.order){pElements=arrayShuffle(pElements)}else if("Middle to Ends"==pData.order){if($.isArray(pElements)&&pElements.length>=2){var middleIndex=Math.floor(pElements.length/2);var startArray=[];var endArray=[];var startTimelinesAt=pData.delay;if(1==pElements.length%2){var timelineMax=new TimelineMax({delay:pData.delay});timelineMax.to(pElements[middleIndex],parseFloat(pData.duration),pFinalPropertiesGetter(pData));var startStartIndex=middleIndex-1;var endStartIndex=middleIndex+1;pData.delay+=pData.interval}else{var startStartIndex=middleIndex-1;var endStartIndex=middleIndex}for(var i=startStartIndex;i>=0;i--){startArray.push(pElements[i])}for(var i=endStartIndex;i<pElements.length;i++){endArray.push(pElements[i])}textEffectStaggeredTimelineCreate(pParent,startArray,pData,pFinalPropertiesGetter);textEffectStaggeredTimelineCreate(pParent,endArray,pData,pFinalPropertiesGetter);return}}else if("Ends to Middle"==pData.order){if($.isArray(pElements)&&pElements.length>=2){var middleIndex=Math.floor(pElements.length/2);var startArray=[];var endArray=[];for(i=0;i<middleIndex;i++){startArray.push(pElements[i])}for(i=pElements.length-1;i>=middleIndex;i--){endArray.push(pElements[i])}textEffectStaggeredTimelineCreate(pParent,startArray,pData,pFinalPropertiesGetter);textEffectStaggeredTimelineCreate(pParent,endArray,pData,pFinalPropertiesGetter);return}}textEffectStaggeredTimelineCreate(pParent,pElements,pData,pFinalPropertiesGetter)}function textEffectStaggeredTimelineCreate(pParent,pElements,pData,pFinalPropertiesGetter){var timeline=new TimelineMax({onComplete:function(){}});var time=parseFloat(pData.delay);$.each(pElements,function(pIndex,pElement){timeline.to(pElement,parseFloat(pData.duration),pFinalPropertiesGetter(pData),time);time+=parseFloat(pData.interval)})}function textEffectValueCalculate(pValue,pIndex,pElementCount){if(-1!=pValue.indexOf("r")){var values=pValue.split("r");if(2==values.length){var lowerValue=parseFloat(values[0]);var higherValue=parseFloat(values[1]);var diff=higherValue-lowerValue;var value=Math.random()*diff+lowerValue;return value}}else if(-1!=pValue.indexOf("s")){var values=pValue.split("s");if(2==values.length){var lowerValue=parseFloat(values[0]);var higherValue=parseFloat(values[1]);var diff=higherValue-lowerValue;var fraction=pIndex/(pElementCount-1);var value=lowerValue+fraction*diff;return value}}else if(-1!=pValue.indexOf(",")){var values=pValue.split(",");var valueIndex=0;for(var i=0;i<pElementCount;i++){if(i==pIndex){return values[valueIndex]}valueIndex+=1;if(valueIndex>=values.length){valueIndex=0}}}return pValue}function customTextEffectFinalPropertiesGet(pData){return{ease:easeGet(pData),x:0,y:0,z:0,scaleX:1,scaleY:1,opacity:1,rotationX:0,rotationY:0,rotationZ:0}}function easeGet(pData){if(pData.ease in gEASES){return gEASES[pData.ease]}return null}